#include <TFT_eSPI.h>
#include <SPI.h>

// Pin definitions
#define TFT_CS     17
#define TFT_RST    4
#define TFT_DC     16
#define TFT_SCLK   15
#define TFT_MOSI   2
#define TFT_BLK    5
#define BUTTON_PIN 0  // Assuming boot button is connected to GPIO 0

// Screen dimensions
#define SCREEN_WIDTH  160
#define SCREEN_HEIGHT 80

// Create display object
TFT_eSPI tft = TFT_eSPI();

// Define rainbow colors
#define TFT_INDIGO 0x4810  // Define a custom color for indigo
uint16_t rainbowColors[] = {TFT_RED, TFT_ORANGE, TFT_YELLOW, TFT_GREEN, TFT_BLUE, TFT_INDIGO, TFT_VIOLET};
int colorIndex = 0;

// Forward declaration of drawScreen
void drawScreen();

void setup() {
  pinMode(BUTTON_PIN, INPUT_PULLUP);
  tft.init();
  tft.setRotation(3);  // Rotate display 270 degrees
  tft.fillScreen(TFT_BLACK);
  drawScreen();
}

void loop() {
  if (digitalRead(BUTTON_PIN) == LOW) {
    delay(200);  // Debounce delay
    colorIndex = (colorIndex + 1) % (sizeof(rainbowColors) / sizeof(rainbowColors[0]));
    drawScreen();
  }
}

void drawScreen() {
  uint16_t currentColor = rainbowColors[colorIndex];

  tft.fillScreen(TFT_BLACK);

  // Draw rounded outline rectangle
  tft.drawRoundRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT, 3, currentColor); // Rounded corners

  // Set text color and size
  tft.setTextColor(currentColor);
  tft.setTextSize(1);

  // Display list of items
  tft.setCursor(10, 20);
  tft.println("Item 1");
  tft.setCursor(10, 40);
  tft.println("Item 2");
  tft.setCursor(10, 60);
  tft.println("Item 3");
}